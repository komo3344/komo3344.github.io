---
title : Django + Vue Project - (1)
date : 2019-12-16
tags:
    - JWT
    - Django
categories:
    - Django
---

# 프로젝트 목표
django와 Vue를 사용하여 Microservices architecture 구현

# oauth2 + jwt 의 이해
## oauth 2.0 이란?
- 웹, 앱 서비스에서 제한적으로 권한을 요청해 사용 할 수 있는 키를 발급 해 주는 것
- 외부 서비스의 인증 및 권한부여를 관리하는 범용 프레임워크

Oauth flow  
![Not found](https://t1.daumcdn.net/cfile/tistory/25238637583547EC0A)

### 초간단 정리
사용자가 웹페이지 로그인하여 인증이 성공하면 access token 발급해준다.  
사용자는 access token을 가지고 다른 리소스들을 사용할 수 있다.

## jwt란?
JSON 형태로 인증토큰을 만들어 통신할때 쓰는 인증방식  
(프로젝트에서 access token은 jwt를 사용할 것이다)

# 프로젝트 생성
Django의 강력한 REST framework인 drf와 jwt토큰사용을 위한 drf-jwt설치

```shell
pip install djangoframework
pip install djangoframework-jwt
```

**settings.py**
```
INSTALLED_APPS = [
    ...
    'rest_framework',
    'rest_framework.authtoken',
]

REST_FRAMEWORK = {
    'DEFAULT_AUTHENTICATION_CLASSES': (
        'rest_framework_jwt.authentication.JSONWebTokenAuthentication',
    ),
}

JWT_AUTH = {
    'JWT_SECRET_KEY': SECRET_KEY,
    'JWT_ALGORITHM': 'HS256',
    'JWT_ALLOW_REFRESH': True,
    'JWT_EXPIRATION_DELTA': datetime.timedelta(days=1),  # 유효기간
    'JWT_REFRESH_EXPIRATION_DELTA': datetime.timedelta(days=7),  # 갱신기간
}
```

**urls.py**
```
from rest_framework_jwt.views import obtain_jwt_token, refresh_jwt_token, verify_jwt_token

urlpatterns = [
    path('api-token-auth/', obtain_jwt_token),  # 토큰발급
    path('api-token-refresh/', refresh_jwt_token),  # 새 토큰 발급
    path('api-token-verity/', verify_jwt_token),    # 토큰 유효성검사

```
# Reference
<https://interconnection.tistory.com/76>
